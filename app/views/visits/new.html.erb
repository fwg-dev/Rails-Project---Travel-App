<h2>Add a visit to your travel log!</h2>

<% if notice %>
  <p><%= notice %></p>
<% end %>

<div>
  <h4>Choose from a city below:</h4>

  <%= form_for @visit, url: "/users/#{@user.id}/visits" do |f| %>
    <%= f.hidden_field :user_id, value: @user.id %>

    City Name: <%= f.collection_select(:city_id, City.all, :id, :name_with_country, {inclue_blank:true})  %>
</div>

<div>
  <h4>Or enter a new city below:</h4>
  <%= f.fields_for :city_attributes do |city_fields|%>
  City Name: <%= city_fields.text_field :name %> <br><br>
    Existing Country:  <%= city_fields.select(:country_id) do %>
      <%= content_tag(:option)%>
      <% @countries.each do |c|%>
        <%= content_tag(:option, c.name, value: c.id)%>
      <% end %>
    <% end %>
    New Country: <%= city_fields.text_field :country %>
  <%end%>
</div>

  <br>

  <h4>Rate your visit:</h4>
  Rate your visit on a scale from 1-5 (5 being the best): <%= f.number_field :city_rating, min:1, max:5 %>
  <br><br>
  <%= f.submit "Save" %>
<% end %>
